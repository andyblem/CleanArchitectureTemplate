
<ng-container *ngIf="isInitializing == true; else isInitializedTemplate">
    <app-page-loading></app-page-loading>
</ng-container>

<ng-template #isInitializedTemplate>

    <!--entity-menu-->
    <app-entity-menu>
        <ng-template #brand>
            Vehicle Makes
        </ng-template>

        <ng-template #items>
            <p-button label="Add Vehicle Make"
                      icon="pi pi-plus"
                      pTooltip="Add new record"
                      tooltipPosition="bottom"
                      (onClick)="showAddVehicleMakeModal()" />
        </ng-template>
    </app-entity-menu>

    <div class="pt-3"></div>

    <!--content-->
    <div class="card">

        <!--filter-bar-->
        <div class="flex justify-content-between flex-wrap pb-4">
            <div class="flex align-items-center justify-content-center formgroup-inline gap-2">
                <input pInputText
                       id="search"
                       type="text"
                       placeholder="Search"
                       class="p-inputtext p-component p-element"
                       [(ngModel)]="requestParameter.searchString">
                <p-dropdown [options]="sortFilterOptions"
                            [(ngModel)]="requestParameter.sortFilter"
                            placeholder="Select sort filter" />
                <p-dropdown [options]="sortOrderOptions"
                            [(ngModel)]="requestParameter.sortOrder"
                            placeholder="Select sort order" />
            </div>
            <div class="flex align-items-center justify-content-center gap-2">
                <p-button label="Clear"
                          icon="pi pi-times"
                          pTooltip="Clear filters"
                          tooltipPosition="bottom"
                          [outlined]="true"
                          (onClick)="onClickRefresh()" />
                <p-button label="Filter"
                          pTooltip="Filter data"
                          tooltipPosition="bottom"
                          icon="pi pi-filter"
                          [outlined]="true"
                          (onClick)="onClickSearch()" />
            </div>
        </div>

        <app-divider></app-divider>

        <div class="pt-5"></div>

        <!--table-data-->
        <div class="grid">
            <div class="col">
                <p-table styleClass="p-datatable-sm p-datatable-striped"
                         [value]="vehicleMakeData.data"
                         [paginator]="true"
                         [rows]="requestParameter.pageSize"
                         [rowsPerPageOptions]="[10, 20, 50, 100]"
                         [totalRecords]="vehicleMakeData.totalRecords"
                         (onPage)="onPageChange($event)">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 2rem">#</th>
                            <th>Name</th>
                            <th style="width:20%">Actions</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-vehicleMake let-rowIndex="rowIndex">
                        <tr>
                            <td>{{ rowIndex + 1 }}</td>
                            <td>{{ vehicleMake.name }}</td>
                            <td>
                                <div class="flex flex-wrap column-gap-1 row-gap-1">
                                    <p-button pTooltip="Edit"
                                              tooltipPosition="bottom"
                                              icon="pi pi-pencil"
                                              size="small"
                                              (click)="onClickView(vehicleMake.vehicleMakeId)" />
                                    <p-button pTooltip="Delete"
                                              tooltipPosition="bottom"
                                              icon="pi pi-trash"
                                              severity="danger"
                                              size="small"
                                              (click)="onClickDelete(vehicleMake.vehicleMakeId)" />
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="3">
                                No records found
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</ng-template>

<!--add vehicle modal-->
<p-dialog header="New Vehicle Make"
          [modal]="true"
          [(visible)]="isAddVehicleMakeModalVisible"
          [style]="{ width: '50rem' }">

    <form [formGroup]="addVehicleMakeForm">
        <div class="p-fluid">
            <div class="field">
                <label class="font-medium" htmlFor="name">Name</label>
                <input pInputText
                        id="name"
                        formControlName="name"
                        type="text"
                        [ngClass]="{'ng-dirty ng-invalid': addVehicleMakeForm.get('name')?.invalid && addVehicleMakeForm.get('name')?.touched}" />
                <small class="text-red-700" *ngIf="addVehicleMakeForm.get('name')?.invalid && addVehicleMakeForm.get('name')?.touched">
                    {{ getErrorMessage('name') }}
                </small>
            </div>
        </div>
    </form>

    <ng-template pTemplate="footer">
        <div class="flex justify-content-end gap-2">
            <p-button label="Cancel" severity="secondary" (onClick)="isAddVehicleMakeModalVisible = false" />
            <p-button label="Save" (onClick)="onSubmitAddVehicleMakeForm()" />
        </div>
    </ng-template>

</p-dialog>

<!--page processing-->
<app-page-processing *ngIf="isBusy"></app-page-processing>

<!--toast-->
<p-toast></p-toast>







